"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[170],{4743:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"firmware","title":"Firmware","description":"The Firmware TapDano is a Java Card Applet designed to facilitate secure and efficient communication between the physical world and the Cardano blockchain.","source":"@site/docs/firmware.md","sourceDirName":".","slug":"/firmware","permalink":"/docs/docs/firmware","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Get Started","permalink":"/docs/docs/intro"},"next":{"title":"SDK","permalink":"/docs/docs/sdk"}}');var s=r(4848),t=r(8453);const a={sidebar_position:2},l="Firmware",d={},o=[{value:"Types of TapDano Tags",id:"types-of-tapdano-tags",level:2},{value:"Standard Return Structure",id:"standard-return-structure",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Methods",id:"methods",level:2},{value:"<strong>Burn Tag</strong> (0xA1)",id:"burn-tag-0xa1",level:3},{value:"<strong>Sign Data</strong> (0xA2)",id:"sign-data-0xa2",level:3},{value:"<strong>Format Tag</strong> (0xA3)",id:"format-tag-0xa3",level:3},{value:"<strong>Lock Tag</strong> (0xA4)",id:"lock-tag-0xa4",level:3},{value:"<strong>Pin Lock</strong> (0xA5)",id:"pin-lock-0xa5",level:3},{value:"<strong>Pin Unlock</strong> (0xA6)",id:"pin-unlock-0xa6",level:3},{value:"<strong>Set PolicyId</strong> (0xA7)",id:"set-policyid-0xa7",level:3},{value:"<strong>Get Memory</strong> (0xB0)",id:"get-memory-0xb0",level:3},{value:"APDU Examples",id:"apdu-examples",level:2},{value:"Environment Setup and Building the application",id:"environment-setup-and-building-the-application",level:2},{value:"Contributing",id:"contributing",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"firmware",children:"Firmware"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Firmware TapDano"})," is a ",(0,s.jsx)(n.strong,{children:"Java Card Applet"})," designed to facilitate secure and efficient communication between the physical world and the Cardano blockchain."]}),"\n",(0,s.jsxs)(n.p,{children:["It leverages the ",(0,s.jsx)(n.strong,{children:"CTAP"})," (Client To Authenticator Protocol) from the ",(0,s.jsx)(n.strong,{children:"FIDO Alliance"})," and ",(0,s.jsx)(n.strong,{children:"NDEF"})," (NFC Data Exchange Format) for communication, using the ",(0,s.jsx)(n.strong,{children:"Ed25519"})," algorithm for generating, storing, and signing transactions, ensuring high security and compatibility with the Cardano blockchain."]}),"\n",(0,s.jsx)(n.h2,{id:"types-of-tapdano-tags",children:"Types of TapDano Tags"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Soulbound"})," - non-extractable private key"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Extractable"})," - extractable private key"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"standard-return-structure",children:"Standard Return Structure"}),"\n",(0,s.jsx)(n.p,{children:"This applet provides a standard return format, regardless of whether it was just read or received a method call. The format is as follows:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'byte[2] - 0x5444 ("TD") - to indicate a card with TapDano firmware;'}),"\n",(0,s.jsx)(n.li,{children:"byte[2] - version (the current is 0x0101)"}),"\n",(0,s.jsx)(n.li,{children:"byte[1] - IsTagBurned (0x00 = false, 0x01 = true)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If IsTagBurned = true:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"byte[1] - Type (0x01 = Soulbound, 0x02 = Extractable)"}),"\n",(0,s.jsx)(n.li,{children:"byte[1] - Extract Locked (permanent lock of the private key extraction, default behavior in Soulbound tags)"}),"\n",(0,s.jsx)(n.li,{children:"byte[1] - PIN Locked (temporary lock with a PIN, 0x00 = false, 0x01 = true)"}),"\n",(0,s.jsx)(n.li,{children:"byte[32] - public or private key (if the tag is Extractable and not permanently or temporarily locked)"}),"\n",(0,s.jsx)(n.li,{children:"byte[28] - PolicyId, which can be set using the SetPolicyId method"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If there is no temporary lock (via PIN):"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"byte[32] - two-factor key (derived from the tag's private key)"}),"\n",(0,s.jsx)(n.li,{children:"byte[32] - last performed signature"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Secure communication using APDU, CSAP (WebAuthn) or NEFF (WebNBF) protocols."}),"\n",(0,s.jsx)(n.li,{children:"Transaction signing with the Ed25519 algorithm."}),"\n",(0,s.jsx)(n.li,{children:"The tag can be temporarily locked using a PIN, preventing access to the private key (only possible for Extractable tags), two-factor key, and the last signature."}),"\n",(0,s.jsx)(n.li,{children:"A key derived from the tag's private key can be used as a two-factor key for wallets or other apps."}),"\n",(0,s.jsx)(n.li,{children:"Secure storage for private keys."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsxs)(n.h3,{id:"burn-tag-0xa1",children:[(0,s.jsx)(n.strong,{children:"Burn Tag"})," (0xA1)"]}),"\n",(0,s.jsxs)(n.p,{children:["Creates or restores a tag TapDano on a card\r\n",(0,s.jsx)(n.strong,{children:"Parameters:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"action"}),": byte","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"0x01"}),": New"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"0x02"}),": Restore"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"})," : byte","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"0x01"}),": Soulbound"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"0x02"}),": Extractable"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"privateKey"}),": byte[32] (only for restore)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"publicKey"}),": byte[32] (only for restore)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"sign-data-0xa2",children:[(0,s.jsx)(n.strong,{children:"Sign Data"})," (0xA2)"]}),"\n",(0,s.jsxs)(n.p,{children:['Signs the received data and returns this signature in the "LAST_SIGNATURE" field\r\n',(0,s.jsx)(n.strong,{children:"Parameters:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"}),": byte[32] - larger sizes can also be passed, but the actual limit depends on the communication protocol used (APDH, CTAT, or NDEF)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"format-tag-0xa3",children:[(0,s.jsx)(n.strong,{children:"Format Tag"})," (0xA3)"]}),"\n",(0,s.jsx)(n.p,{children:"Deletes the TapDano tag from a card, including keys and signatures related to this tag (can be enabled or disabled during installation)"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"lock-tag-0xa4",children:[(0,s.jsx)(n.strong,{children:"Lock Tag"})," (0xA4)"]}),"\n",(0,s.jsx)(n.p,{children:"Permanently locks the extraction of the tag's private key. This is the default behavior for Soulbound tags and cannot be undone."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"pin-lock-0xa5",children:[(0,s.jsx)(n.strong,{children:"Pin Lock"})," (0xA5)"]}),"\n",(0,s.jsxs)(n.p,{children:["Temporarily locks the extraction of the tag's private key, two-factor key, and the last signature using a PIN.\r\n",(0,s.jsx)(n.strong,{children:"Parameters:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pin"}),": byte[4] (this number can be changed)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"pin-unlock-0xa6",children:[(0,s.jsx)(n.strong,{children:"Pin Unlock"})," (0xA6)"]}),"\n",(0,s.jsxs)(n.p,{children:["Unlocks the temporary lock via PIN\r\n",(0,s.jsx)(n.strong,{children:"Parameters:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pin"}),": byte[4] (this number can be changed)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"set-policyid-0xa7",children:[(0,s.jsx)(n.strong,{children:"Set PolicyId"})," (0xA7)"]}),"\n",(0,s.jsxs)(n.p,{children:["Stores the PolicyId\r\n",(0,s.jsx)(n.strong,{children:"Parameters:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"policyId"}),": byte[28]"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"get-memory-0xb0",children:[(0,s.jsx)(n.strong,{children:"Get Memory"})," (0xB0)"]}),"\n",(0,s.jsx)(n.p,{children:"Used only for memory tests during the development of this applet."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"apdu-examples",children:"APDU Examples"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"00A404000854617044616E6F0100"})," - Selects the TapDano Applet"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"00 A1 00 00 02 01 01"})," - Executes the ",(0,s.jsx)(n.code,{children:"Burn Tag"})," method with parameters ",(0,s.jsx)(n.code,{children:"action"})," and ",(0,s.jsx)(n.code,{children:"type"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"00"})," - CLA"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"A1"})," - INS (Method ",(0,s.jsx)(n.code,{children:"Burn Tag"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"00"})," - P1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"00"})," - P2"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"02"})," - Data Length"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"01"})," - Parameter ",(0,s.jsx)(n.code,{children:"action"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"01"})," - Parameter ",(0,s.jsx)(n.code,{children:"type"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"environment-setup-and-building-the-application",children:"Environment Setup and Building the application"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Download JavacardKit"}),": Obtain a copy of ",(0,s.jsx)(n.a,{href:"https://www.oracle.com/java/technologies/javacard-sdk-downloads.html",children:"JavacardKit version 3.2"})," (or jckit_303 if you prefer)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Set Environment Variable"}),": Configure the ",(0,s.jsx)(n.code,{children:"JC_HOME"})," environment variable to point to your JavacardKit directory."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export JC_HOME=<path_to_your_jckit_directory>\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Run Gradle Build"}),": Execute the following command to build the JavaCard application, which will produce a ",(0,s.jsx)(n.code,{children:".cap"})," file for installation."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./gradlew buildJavaCard\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,s.jsx)(n.p,{children:"Contributions are welcome! Feel free to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Submit a Pull Request"}),": If you have a new feature idea or a bug fix."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Open an Issue"}),": For bug reports or feature suggestions."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Your contributions are greatly appreciated and help make TapDano better for everyone."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);